# 学习笔记
## 作业三：请用自己的语言描述如下问题：

1. 在你目前的工作场景中，哪个业务适合使用 rabbitmq？ 

   答：老师通过网络向学生出题，学生抢答，最快的若干名学生获得答题权。

2. 引入 rabbitmq 主要解决什么问题?（非相关工作可以以设计淘宝购物和结账功能为例来描述）
   答：确保每一个学生都能收到老师的出题信息；避免很多学生同时抢答时，产生网络拥堵。

3. 如何避免消息重复投递或重复消费？
   答：让接收方在收到消息后给出确认信息，利用数据库的唯一性约束。

4. 交换机 fanout、direct、topic 有什么区别？
   答：direct是地下工作者一对一通过暗号（routing key）对接；
   fanout是大公司召开新闻发布会，各大媒体就是绑定到大公司新闻部门的消息队列，各大媒体均会收到大公司的新闻通稿；
   topic是大公司根据产品受众情况向不同的渠道投放广告，比如某产品面向的受众是年轻的上班族，所以只投放电梯广告、地铁广告等，而不去投放天气预报中广告、路牌广告之类。

5. 架构中引入消息队列是否利大于弊？你认为消息队列有哪些缺点？
   答：引入消息队列后系统复杂度提高，要考虑重复消费、消息顺序性、消息丢失等多种可能性。
   数据一致性问题：用户下单、付款成功后也通知了用户，但数据库写入失败了，这就造成前后端数据不一致。
   消息丢失问题：通过序号是否连续来监控是否有消息丢失。
   重复消费问题：可利用数据库的唯一性约束。